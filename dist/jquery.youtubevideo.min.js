!function($){function onVideoInfoReady(t){var e=0,a=setInterval(function(){e>500&&clearInterval(a),window.youtubeIDsInfo&&(t(),clearInterval(a)),e++},50)}function randomInteger(t,e){var a=t-.5+Math.random()*(e-t+1);return a=Math.round(a)}var methods={init:function(options){var defaults=$.extend(!0,{layout:{wrap:$("<div />",{class:"ytb-video-wrap"}),container:$("<div />",{class:"ytb-video-container"}),iframe:$("<iframe />",{class:"ytb-video-iframe"}),button:$("<div />",{class:"ytb-video-play-button"}).append('<svg viewBox="0 0 68 48"><path class="ytb-video-play-button-bg" d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z" fill="#212121" fill-opacity="0.8"></path><path d="M 45,24 27,14 27,34" fill="#fff"></path></svg>')},aspectRatio:56.25,cover:"mqdefault",parametrs:"autoplay=1&autohide=1",playEvent:"click",type:"video",api:"",duration:!1,title:!1,description:!1,beforeInit:function(t){},afterInit:function(t){},beforeLoadIframe:function(t){},afterLoadIframe:function(t){},afterLoadCover:function(t){}},$.fn.youtubeVideo.defaults);return this.each(function(){function createFirstMarkup(){$ths.addClass("ytb-video"),layout.container&&(layout.container=layout.container.clone().appendTo($ths)),layout.button&&(layout.button=layout.button.clone().appendTo(sets.layout.container)),layout.wrap&&(layout.container.wrap(layout.wrap.clone()),layout.wrap=layout.container.parent()),sets.aspectRatio&&sets.aspectRatio>0&&sets.aspectRatio<=100&&layout.wrap.css({"padding-bottom":sets.aspectRatio+"%",position:"relative"}),layout.iframe&&(layout.iframe=layout.iframe.clone()),sets.api&&getApiInfo();var t=new Image;if(sets.cover&&"string"==typeof sets.cover&&sets.cover.indexOf("http")+1)t.src=sets.cover,t.onload=function(){layout.container.css("background-image","url("+sets.cover+")"),sets.afterLoadCover.call($ths,sets)};else if(sets.cover&&"string"==typeof sets.cover&&sets.cover.indexOf("default")+1){var e="https://i.ytimg.com/vi/"+$ths.data("ytb-video")+"/"+sets.cover+".jpg";t.src=e,t.onload=function(){sets.layout.container.css("background-image","url("+e+")"),sets.afterLoadCover.call($ths,sets)}}else Array.isArray(sets.cover)&&sets.api?onVideoInfoReady(function(){var e,a,o;$(window.youtubeIDsInfo.items).each(function(t,a){a.id!=sets._videoID||(e=a.snippet.thumbnails)}),$.each(sets.cover,function(t,s){if(!o){if(s.indexOf("http")+1)return a=s,void(o=!0);var i=s;$.each(e,function(t,e){if(e.url.indexOf("/"+i+".jpg")+1)return a=e.url,void(o=!0)})}}),a&&(t.src=a,t.onload=function(){sets.layout.container.css("background-image","url("+a+")"),sets.afterLoadCover.call($ths,sets)})}):!1===window.youtubeIDsInfo&&(t.src="https://i.ytimg.com/vi/"+sets._videoID+"/mqdefault.jpg",t.onload=function(){sets.layout.container.css("background-image","url("+t.src+")"),sets.afterLoadCover.call($ths,sets)});sets.duration&&sets.api&&"video"==sets.type&&onVideoInfoReady(function(){var t,e=!1;if($(window.youtubeIDsInfo.items).each(function(t,a){return a.id!=sets._videoID?void 0:(e=t,!1)}),e||0==e){t=formatDate(window.youtubeIDsInfo.items[e].contentDetails.duration);var a=$("<span/>",{class:"ytb-video-duration"}).append($("<span/>",{class:"ytb-video-duration-text",text:t}));sets.layout.container.append(a)}}),sets.title&&sets.api&&"video"==sets.type&&onVideoInfoReady(function(){window.youtubeIDsInfo.firstTitleCheck||($(window.youtubeIDsInfo.items).each(function(t,e){var a=e.id,o=e.snippet.title;$("[data-ytb-title-id]").each(function(t,e){a==$(e).attr("data-ytb-title-id")&&$(this).text(o)})}),window.youtubeIDsInfo.firstTitleCheck=!0)}),sets.description&&sets.api&&"video"==sets.type&&onVideoInfoReady(function(){window.youtubeIDsInfo.firstDescrCheck||($(window.youtubeIDsInfo.items).each(function(t,e){var a=e.id,o=e.snippet.description;$("[data-ytb-descr-id]").each(function(t,e){a==$(e).attr("data-ytb-descr-id")&&$(this).text(o)})}),window.youtubeIDsInfo.firstDescrCheck=!0)})}function getApiInfo(){if(!sets.api||1==window.youtubeIDsCheck)return!1;if(window.youtubeIDsInfo)return window.youtubeIDsInfo;var t,e="";return $("[data-ytb-video]").each(function(t,a){-1==e.indexOf($(a).attr("data-ytb-video"))&&(e+=$(a).attr("data-ytb-video")+",")}),e=e.substring(0,e.length-1),t="https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails&id="+e+"&key="+sets.api+"&fields=items(id,snippet(title,description,thumbnails),contentDetails(duration))",$.ajax({url:t,type:"GET",async:!0,success:function(t){window.youtubeIDsInfo=t},error:function(t){window.youtubeIDsInfo=!1}}),window.youtubeIDsCheck=!0,window.youtubeIDsInfo}function formatDate(t){var e,a=/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/,o=0,s=0,i=0;if(a.test(t)){var n=a.exec(t);n[1]&&(o=Number(n[1])),n[2]&&(s=Number(n[2])),n[3]&&(i=Number(n[3])),e=3600*o+60*s+i}var r=new Date(null);r.setSeconds(e-1);for(var d=r.toISOString().substr(11,8),u=0;u<3;u++)"0"!=d.charAt(0)&&":"!=d.charAt(0)||(d=d.substr(1));return d}var $ths=$(this);if(1==$ths.data("_init"))return!1;$ths.data("defaults",defaults),$ths.data("options",options);var data=$ths.attr("data-ytb-options");"object"!=typeof(data=eval("("+data+")"))&&(data={}),$ths.data("settings",$.extend(!0,{},defaults,options,data));var sets=$ths.data("settings"),layout=sets.layout;sets._videoID=$ths.attr("data-ytb-video"),sets.beforeInit.call($ths,sets),createFirstMarkup(),sets._btnNameSpaceID=randomInteger(1e7,99999999),sets.playEvent&&$ths.one(sets.playEvent+".yv-"+sets._btnNameSpaceID,function(){methods.play.call($ths)}),$ths.data("_init",!0),sets.afterInit.call($ths,sets)}),this},destroy:function(){if(!$(this).data("_init"))return!1;var t=$(this),e=t.data("settings");return e.layout.playEvent&&t.off(e.playEvent+".yv-"+e._btnNameSpaceID),e.layout.wrap.remove(),t.removeData(),this},reinit:function(t){var e=$(this),a=(e.data("settings"),e.data("options"));return methods.destroy.call(e),t&&"object"==typeof t?methods.init.call(e,t):methods.init.call(e,a),this},play:function(){function t(t){o.container.remove(),o.iframe.appendTo(t).on("load",function(){a.afterLoadIframe.call(e,a)})}var e=$(this),a=e.data("settings"),o=a.layout;e.attr("data-ytb-video");a.beforeLoadIframe.call(e,a);var s="";return"video"==a.type?(s="https://www.youtube.com/embed/"+e.data("ytb-video"),a.parametrs&&(s+="?"+a.parametrs)):"playlist"==a.type&&(s="https://www.youtube.com/embed",a.parametrs&&(s+="?"+a.parametrs),s+="?listType=playlist&list="+e.data("ytb-video")),o.iframe.attr({src:s,frameborder:0,allowfullscreen:""}),t(o.wrap&&a.aspectRatio>0&&a.aspectRatio<100?e.find("."+a.layout.wrap.get(0).className):e),this}};$.fn.youtubeVideo=function(t){if(methods[t])return methods[t].apply(this,Array.prototype.slice.call(arguments,1));"object"!=typeof t&&t?$.error("Method "+t+" does not exist on jQuery.youtubeVideo"):methods.init.apply(this,arguments)}}(jQuery);